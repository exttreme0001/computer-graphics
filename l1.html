<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Converter Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- СТИЛИ ДЛЯ ПОЛЗУНКОВ (RANGE INPUTS) --- */
        
        /* Базовый сброс и настройка контейнера ползунка */
        input[type=range] {
            -webkit-appearance: none; /* Отключаем стандартный вид */
            width: 100%;
            height: 12px; /* Высота самой дорожки */
            border-radius: 999px; /* Идеальное скругление (pill shape) */
            cursor: pointer;
            border: 1px solid rgba(0, 0, 0, 0.1); /* Тонкая рамка, чтобы светлые цвета не терялись */
            outline: none;
            margin: 10px 0; /* Отступ для выступающего бегунка */
            /* Градиент будет задаваться через JS в inline-styles */
        }

        /* Настройка бегунка (Thumb) для Chrome/Safari/Edge */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #ffffff;
            border: 1px solid #e2e8f0; /* Легкая обводка бегунка */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Тень для объема */
            margin-top: -7px; /* Центрируем бегунок относительно дорожки высотой 12px: (12 - 24) / 2 = -6 (чуть подправил до -7) */
            transition: transform 0.1s ease, box-shadow 0.1s ease;
        }

        /* Эффект при нажатии на бегунок */
        input[type=range]:active::-webkit-slider-thumb {
            transform: scale(1.1);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3); /* Подсветка при захвате */
            border-color: #3b82f6;
        }

        /* Настройка бегунка для Firefox */
        input[type=range]::-moz-range-thumb {
            height: 24px;
            width: 24px;
            border: 1px solid #e2e8f0;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        /* Убираем стандартную обводку фокуса, так как мы сделали свою на active */
        input[type=range]:focus {
            outline: none;
        }

        /* Убираем стрелочки в инпутах с цифрами */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans min-h-screen flex items-center justify-center p-4 md:p-8">

    <div class="bg-white w-full max-w-6xl rounded-3xl shadow-xl overflow-hidden border border-slate-100">
        
        <!-- Шапка -->
        <div class="bg-slate-900 px-8 py-6 flex justify-between items-center">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold text-white tracking-wide">Color Converter </h1>
                <p class="text-slate-400 text-xs md:text-sm mt-1 font-medium">RGB • CMYK • HSV • HEX</p>
            </div>
            <!-- Мини-индикатор цвета в шапке -->
            <div id="header-preview" class="w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-white/20 shadow-lg bg-blue-500 transition-colors duration-200"></div>
        </div>

        <div class="p-6 md:p-10 grid grid-cols-1 xl:grid-cols-12 gap-10">

            <!-- ЛЕВАЯ ЧАСТЬ: Основное превью и HEX (3 колонки) -->
            <div class="xl:col-span-3 flex flex-col gap-8">
                
                <!-- Большой квадрат превью -->
                <div class="relative group w-full aspect-square xl:aspect-auto xl:h-64 rounded-2xl shadow-inner border border-slate-200 overflow-hidden">
                    <div id="color-preview" class="w-full h-full flex items-center justify-center transition-colors duration-100">
                        <span id="contrast-text" class="font-bold text-xl tracking-widest opacity-90 select-none">PREVIEW</span>
                    </div>
                    <!-- Скрытый нативный пикер -->
                    <input type="color" id="native-picker" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" title="Нажмите для системной палитры">
                </div>

                <!-- Поле HEX -->
                <div class="bg-slate-50 p-5 rounded-2xl border border-slate-200">
                    <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">HEX Code</label>
                    <div class="flex items-center gap-3 bg-white p-3 rounded-xl border border-slate-200 shadow-sm focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100 transition-all">
                        <span class="text-slate-300 font-mono text-xl select-none">#</span>
                        <input type="text" id="hex-input" maxlength="6" class="w-full bg-transparent font-mono text-xl text-slate-700 focus:outline-none uppercase font-medium placeholder-slate-200" placeholder="FFFFFF">
                        <button id="copy-btn" class="text-slate-400 hover:text-blue-500 p-2 rounded-lg hover:bg-slate-50 transition active:scale-95" title="Копировать HEX">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ЦЕНТРАЛЬНАЯ ЧАСТЬ: RGB и HSV (5 колонок) -->
            <div class="xl:col-span-5 flex flex-col gap-8">
                
                <!-- RGB Блок -->
                <div>
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest">RGB Model</h3>
                    </div>
                    <div class="space-y-6">
                        <!-- Red -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-red-500 w-4 pt-1">R</label>
                            <input type="range" id="rgb-r-slide" min="0" max="255" class="flex-1">
                            <input type="number" id="rgb-r-num" min="0" max="255" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                        <!-- Green -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-green-500 w-4 pt-1">G</label>
                            <input type="range" id="rgb-g-slide" min="0" max="255" class="flex-1">
                            <input type="number" id="rgb-g-num" min="0" max="255" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                        <!-- Blue -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-blue-500 w-4 pt-1">B</label>
                            <input type="range" id="rgb-b-slide" min="0" max="255" class="flex-1">
                            <input type="number" id="rgb-b-num" min="0" max="255" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                    </div>
                </div>

                <!-- HSV Блок -->
                <div>
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest">HSV Model</h3>
                    </div>
                    <div class="space-y-6">
                        <!-- Hue -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-slate-600 w-4 pt-1">H</label>
                            <!-- Статичный красивый радужный градиент для Hue -->
                            <input type="range" id="hsv-h-slide" min="0" max="360" class="flex-1" style="background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);">
                            <input type="number" id="hsv-h-num" min="0" max="360" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                        <!-- Saturation -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-slate-600 w-4 pt-1">S</label>
                            <input type="range" id="hsv-s-slide" min="0" max="100" class="flex-1">
                            <input type="number" id="hsv-s-num" min="0" max="100" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                        <!-- Value -->
                        <div class="flex items-center gap-4">
                            <label class="text-xs font-bold text-slate-600 w-4 pt-1">V</label>
                            <input type="range" id="hsv-v-slide" min="0" max="100" class="flex-1">
                            <input type="number" id="hsv-v-num" min="0" max="100" class="w-16 py-1.5 text-center font-bold text-sm bg-slate-50 border border-slate-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all">
                        </div>
                    </div>
                </div>
            </div>

            <!-- ПРАВАЯ ЧАСТЬ: CMYK (4 колонки) -->
            <div class="xl:col-span-4 bg-slate-50/80 p-6 rounded-2xl border border-slate-200/60">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-200 pb-2">CMYK Model</h3>
                
                <div class="space-y-7">
                    <!-- Cyan -->
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-bold text-cyan-600 uppercase tracking-wider">Cyan</label>
                            <span class="text-[10px] font-bold text-slate-400" id="cmyk-c-val">0%</span>
                        </div>
                        <div class="flex gap-3 items-center">
                            <input type="range" id="cmyk-c-slide" min="0" max="100" class="flex-1" style="background: linear-gradient(to right, #ffffff, #06b6d4);">
                            <input type="number" id="cmyk-c-num" min="0" max="100" class="w-14 py-1 text-center font-bold text-xs bg-white border border-slate-200 rounded-md outline-none">
                        </div>
                    </div>

                    <!-- Magenta -->
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-bold text-pink-600 uppercase tracking-wider">Magenta</label>
                            <span class="text-[10px] font-bold text-slate-400" id="cmyk-m-val">0%</span>
                        </div>
                        <div class="flex gap-3 items-center">
                            <input type="range" id="cmyk-m-slide" min="0" max="100" class="flex-1" style="background: linear-gradient(to right, #ffffff, #db2777);">
                            <input type="number" id="cmyk-m-num" min="0" max="100" class="w-14 py-1 text-center font-bold text-xs bg-white border border-slate-200 rounded-md outline-none">
                        </div>
                    </div>

                    <!-- Yellow -->
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-bold text-yellow-600 uppercase tracking-wider">Yellow</label>
                            <span class="text-[10px] font-bold text-slate-400" id="cmyk-y-val">0%</span>
                        </div>
                        <div class="flex gap-3 items-center">
                            <input type="range" id="cmyk-y-slide" min="0" max="100" class="flex-1" style="background: linear-gradient(to right, #ffffff, #ca8a04);">
                            <input type="number" id="cmyk-y-num" min="0" max="100" class="w-14 py-1 text-center font-bold text-xs bg-white border border-slate-200 rounded-md outline-none">
                        </div>
                    </div>

                    <!-- Black -->
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-bold text-slate-700 uppercase tracking-wider">Key (Black)</label>
                            <span class="text-[10px] font-bold text-slate-400" id="cmyk-k-val">0%</span>
                        </div>
                        <div class="flex gap-3 items-center">
                            <input type="range" id="cmyk-k-slide" min="0" max="100" class="flex-1" style="background: linear-gradient(to right, #ffffff, #000000);">
                            <input type="number" id="cmyk-k-num" min="0" max="100" class="w-14 py-1 text-center font-bold text-xs bg-white border border-slate-200 rounded-md outline-none">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- 1. Сбор элементов DOM ---
        const els = {
            preview: document.getElementById('color-preview'),
            headerPreview: document.getElementById('header-preview'),
            text: document.getElementById('contrast-text'),
            native: document.getElementById('native-picker'),
            hex: document.getElementById('hex-input'),
            copy: document.getElementById('copy-btn'),
            rgb: {
                r: { s: document.getElementById('rgb-r-slide'), n: document.getElementById('rgb-r-num') },
                g: { s: document.getElementById('rgb-g-slide'), n: document.getElementById('rgb-g-num') },
                b: { s: document.getElementById('rgb-b-slide'), n: document.getElementById('rgb-b-num') }
            },
            hsv: {
                h: { s: document.getElementById('hsv-h-slide'), n: document.getElementById('hsv-h-num') },
                s: { s: document.getElementById('hsv-s-slide'), n: document.getElementById('hsv-s-num') },
                v: { s: document.getElementById('hsv-v-slide'), n: document.getElementById('hsv-v-num') }
            },
            cmyk: {
                c: { s: document.getElementById('cmyk-c-slide'), n: document.getElementById('cmyk-c-num'), l: document.getElementById('cmyk-c-val') },
                m: { s: document.getElementById('cmyk-m-slide'), n: document.getElementById('cmyk-m-num'), l: document.getElementById('cmyk-m-val') },
                y: { s: document.getElementById('cmyk-y-slide'), n: document.getElementById('cmyk-y-num'), l: document.getElementById('cmyk-y-val') },
                k: { s: document.getElementById('cmyk-k-slide'), n: document.getElementById('cmyk-k-num'), l: document.getElementById('cmyk-k-val') }
            }
        };

        // --- 2. Математические функции ---

        function rgbToHsv(r, g, b) {
            r/=255; g/=255; b/=255;
            let max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, v = max;
            let d = max - min;
            s = max === 0 ? 0 : d / max;
            if (max === min) h = 0;
            else {
                switch(max){
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return [h * 360, s * 100, v * 100];
        }

        function hsvToRgb(h, s, v) {
            h/=360; s/=100; v/=100;
            let r, g, b, i = Math.floor(h * 6), f = h * 6 - i, p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s);
            switch (i % 6) {
                case 0: r=v; g=t; b=p; break;
                case 1: r=q; g=v; b=p; break;
                case 2: r=p; g=v; b=t; break;
                case 3: r=p; g=q; b=v; break;
                case 4: r=t; g=p; b=v; break;
                case 5: r=v; g=p; b=q; break;
            }
            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
        }

        function rgbToCmyk(r, g, b) {
            let c = 1 - (r / 255), m = 1 - (g / 255), y = 1 - (b / 255), k = Math.min(c, m, y);
            if (k === 1) return [0, 0, 0, 100];
            c = (c - k) / (1 - k);
            m = (m - k) / (1 - k);
            y = (y - k) / (1 - k);
            return [Math.round(c*100), Math.round(m*100), Math.round(y*100), Math.round(k*100)];
        }

        function cmykToRgb(c, m, y, k) {
            c/=100; m/=100; y/=100; k/=100;
            let r = 255 * (1 - c) * (1 - k);
            let g = 255 * (1 - m) * (1 - k);
            let b = 255 * (1 - y) * (1 - k);
            return [Math.round(r), Math.round(g), Math.round(b)];
        }

        function rgbToHex(r, g, b) {
            return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
        }

        function hexToRgb(hex) {
            let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16) } : null;
        }

        function getContrastColor(hex) {
            let r = parseInt(hex.substr(0,2),16), g = parseInt(hex.substr(2,2),16), b = parseInt(hex.substr(4,2),16);
            return (((r*299)+(g*587)+(b*114))/1000) >= 128 ? '#1e293b' : '#ffffff';
        }

        // --- 3. Основная логика обновления ---

        function updateAll(r, g, b, source) {
            // Ограничение значений
            r = Math.max(0, Math.min(255, Math.round(r)));
            g = Math.max(0, Math.min(255, Math.round(g)));
            b = Math.max(0, Math.min(255, Math.round(b)));

            const hex = rgbToHex(r, g, b);
            const [h, s, v] = rgbToHsv(r, g, b);
            const [c, m, y, k] = rgbToCmyk(r, g, b);

            // 1. Обновление визуалов (Preview, HEX, Text)
            els.preview.style.backgroundColor = `rgb(${r},${g},${b})`;
            els.headerPreview.style.backgroundColor = `rgb(${r},${g},${b})`;
            els.text.style.color = getContrastColor(hex);
            
            if(source !== 'hex') els.hex.value = hex;
            if(source !== 'native') els.native.value = "#" + hex;

            // 2. Обновление RGB полей (если источник не RGB)
            if(source !== 'rgb') {
                ['r','g','b'].forEach(key => { 
                    els.rgb[key].s.value = eval(key); 
                    els.rgb[key].n.value = eval(key); 
                });
            }

            // 3. Обновление HSV полей (если источник не HSV)
            // Важно: не обновляем слайдеры, если мы их тянем, чтобы избежать бага с V=0
            if(source !== 'hsv') {
                els.hsv.h.s.value = els.hsv.h.n.value = Math.round(h);
                els.hsv.s.s.value = els.hsv.s.n.value = Math.round(s);
                els.hsv.v.s.value = els.hsv.v.n.value = Math.round(v);
            }

            // 4. Обновление CMYK полей
            if(source !== 'cmyk') {
                els.cmyk.c.s.value = els.cmyk.c.n.value = c;
                els.cmyk.m.s.value = els.cmyk.m.n.value = m;
                els.cmyk.y.s.value = els.cmyk.y.n.value = y;
                els.cmyk.k.s.value = els.cmyk.k.n.value = k;
            }
            // Лейблы процентов
            els.cmyk.c.l.textContent = els.cmyk.c.s.value + '%';
            els.cmyk.m.l.textContent = els.cmyk.m.s.value + '%';
            els.cmyk.y.l.textContent = els.cmyk.y.s.value + '%';
            els.cmyk.k.l.textContent = els.cmyk.k.s.value + '%';

            // 5. Динамические градиенты для ползунков
            updateGradients(r, g, b, h, s, v);
        }

        function updateGradients(r, g, b, h, s, v) {
            // RGB Градиенты: от 0 до 255 для текущего канала, остальные каналы фиксированы
            els.rgb.r.s.style.background = `linear-gradient(to right, rgb(0, ${g}, ${b}), rgb(255, ${g}, ${b}))`;
            els.rgb.g.s.style.background = `linear-gradient(to right, rgb(${r}, 0, ${b}), rgb(${r}, 255, ${b}))`;
            els.rgb.b.s.style.background = `linear-gradient(to right, rgb(${r}, ${g}, 0), rgb(${r}, ${g}, 255))`;
            
            // HSV Градиенты
            // Saturation: от серого (зависит от V) до полного цвета
            const grey = Math.round(255 * (v/100));
            const fullColor = hsvToRgb(h, 100, v);
            els.hsv.s.s.style.background = `linear-gradient(to right, rgb(${grey},${grey},${grey}), rgb(${fullColor.join(',')}))`;
            
            // Value: от черного до цвета (зависит от H и S)
            const maxColor = hsvToRgb(h, s, 100);
            els.hsv.v.s.style.background = `linear-gradient(to right, #000, rgb(${maxColor.join(',')}))`;
        }

        // --- 4. Навешивание событий (Listeners) ---
        
        // Функция-помощник для привязки
        function bindInputs() {
            // RGB
            const onRgb = () => updateAll(els.rgb.r.s.value, els.rgb.g.s.value, els.rgb.b.s.value, 'rgb');
            ['r','g','b'].forEach(k => {
                els.rgb[k].s.addEventListener('input', () => { els.rgb[k].n.value = els.rgb[k].s.value; onRgb(); });
                els.rgb[k].n.addEventListener('input', () => { els.rgb[k].s.value = els.rgb[k].n.value; onRgb(); });
            });

            // HSV
            const onHsv = () => {
                const rgb = hsvToRgb(els.hsv.h.s.value, els.hsv.s.s.value, els.hsv.v.s.value);
                updateAll(rgb[0], rgb[1], rgb[2], 'hsv');
            };
            ['h','s','v'].forEach(k => {
                els.hsv[k].s.addEventListener('input', () => { els.hsv[k].n.value = els.hsv[k].s.value; onHsv(); });
                els.hsv[k].n.addEventListener('input', () => { els.hsv[k].s.value = els.hsv[k].n.value; onHsv(); });
            });

            // CMYK
            const onCmyk = () => {
                const rgb = cmykToRgb(els.cmyk.c.s.value, els.cmyk.m.s.value, els.cmyk.y.s.value, els.cmyk.k.s.value);
                updateAll(rgb[0], rgb[1], rgb[2], 'cmyk');
            };
            ['c','m','y','k'].forEach(k => {
                els.cmyk[k].s.addEventListener('input', () => { els.cmyk[k].n.value = els.cmyk[k].s.value; onCmyk(); });
                els.cmyk[k].n.addEventListener('input', () => { els.cmyk[k].s.value = els.cmyk[k].n.value; onCmyk(); });
            });

            // Hex & Picker
            els.hex.addEventListener('input', (e) => {
                let hex = e.target.value;
                if(hex.length === 6 && /^[0-9A-Fa-f]{6}$/.test(hex)) {
                    const rgb = hexToRgb(hex);
                    updateAll(rgb.r, rgb.g, rgb.b, 'hex');
                }
            });
            els.native.addEventListener('input', (e) => {
                const rgb = hexToRgb(e.target.value);
                updateAll(rgb.r, rgb.g, rgb.b, 'native');
            });

            // Кнопка копирования
            els.copy.addEventListener('click', () => {
                navigator.clipboard.writeText('#' + els.hex.value);
                const originalIcon = els.copy.innerHTML;
                els.copy.innerHTML = `<svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`;
                setTimeout(() => els.copy.innerHTML = originalIcon, 1000);
            });
        }

        // Инициализация
        bindInputs();
        updateAll(255, 123, 242, 'rgb'); // Стартовый розовый цвет как на скриншоте

    </script>
</body>
</html>